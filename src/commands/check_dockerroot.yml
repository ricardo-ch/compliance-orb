description: >
  This command check's if target docker image user is root user
parameters:
  image_file:
    type: string
    description: file where Docker image name is stored
  username:
    type: string
    default: ""
  password:
    type: string
    default: ""
  url:
    type: string
    default: ""
steps:
  - docker_registry:
      username: << parameters.username >>
      password: << parameters.password >>
      url: << parameters.url >>
  - run:
      name: pull target image
      command: |
        docker pull $(cat << parameters.image_file >>)
  - run:
      name: check for root in docker image
      enviroment:
        TARGET_IMAGE_FILE: << parameters.image_file >>
      command: <<include(scripts/isdockeruserroot.sh)>>
